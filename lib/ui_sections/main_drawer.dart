import 'package:active_ecommerce_flutter/screens/choose_page.dart';
import 'package:active_ecommerce_flutter/screens/patientScreens/login.dart';
import 'package:active_ecommerce_flutter/screens/patientScreens/medicine_data.dart';
import 'package:flutter/material.dart';
import 'package:flutter/cupertino.dart';
import 'package:active_ecommerce_flutter/screens/patientScreens/profile_edit.dart';
import 'package:flutter_hex_color/flutter_hex_color.dart';
import 'package:flutter_svg/flutter_svg.dart';
import 'package:adobe_xd/pinned.dart';
import 'package:active_ecommerce_flutter/helpers/shared_value_helper.dart';
import 'package:active_ecommerce_flutter/ConsultationHistory.dart';
import 'package:active_ecommerce_flutter/helpers/auth_helper.dart';
import 'package:active_ecommerce_flutter/screens/patientScreens/AppointmentHistory1.dart';
import 'package:active_ecommerce_flutter/screens/login_page.dart';
import 'package:shared_preferences/shared_preferences.dart';

class MainDrawer extends StatefulWidget {
  const MainDrawer({
    Key key,
  }) : super(key: key);

  @override
  _MainDrawerState createState() => _MainDrawerState();
}

class _MainDrawerState extends State<MainDrawer> {
  onTapLogout(context) async {
    SharedPreferences prefs = await SharedPreferences.getInstance();

    user_id.$ = null;
    prefs.setString('number', '');
    AuthHelper().clearUserData();
    Navigator.push(context, MaterialPageRoute(builder: (context) {
      return Login();
    }));
  }

  @override
  Widget build(BuildContext context) {
    return Drawer(
      elevation: 0,
      child: Container(
        decoration: BoxDecoration(
          // borderRadius: BorderRadius.only(
          //   topRight: Radius.circular(36.0),
          //   bottomRight: Radius.circular(36.0),
          // ),
          color: Colors.grey.shade200,
          boxShadow: [
            BoxShadow(
              color: const Color(0x29000000),
              offset: Offset(6, 3),
              blurRadius: 12,
            ),
          ],
        ),
        padding: EdgeInsets.only(top: 60),
        child: SingleChildScrollView(
          child: Column(
            children: <Widget>[
              Container(
                height: 100,
                width: 100,
                child: Stack(
                  children: <Widget>[
                    Pinned.fromPins(
                      Pin(start: 0.0, end: 0.0),
                      Pin(start: 0.0, end: 0.0),
                      child: Container(
                        decoration: BoxDecoration(
                          borderRadius: BorderRadius.all(
                              Radius.elliptical(9999.0, 9999.0)),
                          color: Colors.grey,
                          boxShadow: [
                            BoxShadow(
                              color: const Color(0x29000000),
                              offset: Offset(6, 3),
                              blurRadius: 12,
                            ),
                          ],
                        ),
                      ),
                    ),
                    Pinned.fromPins(
                      Pin(size: 36.0, middle: 0.5156),
                      Pin(size: 72.0, end: 11.0),
                      child:
                          // Adobe XD layer: 'PikPng.com_characteâ€¦' (shape)
                          Container(
                        decoration: BoxDecoration(
                            // image: DecorationImage(
                            //   image: const AssetImage('assets/images/lady2.png'),
                            //   fit: BoxFit.fill,
                            // ),
                            ),
                        child: Icon(
                          Icons.person,
                          color: Colors.black,
                        ),
                      ),
                    ),
                  ],
                ),
              ),
              Padding(
                padding: const EdgeInsets.all(8.0),
                child: Text(
                  user_name.$.toString().toUpperCase(),
                  style: TextStyle(
                    fontFamily: 'Arial',
                    fontSize: 16,
                    color: Colors.black,
                    fontWeight: FontWeight.w700,
                  ),
                  textAlign: TextAlign.left,
                ),
              ),
              Row(
                children: [
                  Spacer(),
                  Padding(
                    padding: const EdgeInsets.all(0.0),
                    child: Text(
                      '(+91) ' + user_phone.$.toString(),
                      style: TextStyle(
                        fontFamily: 'Arial',
                        fontSize: 16,
                        color: Colors.black,
                        fontWeight: FontWeight.w700,
                      ),
                      textAlign: TextAlign.left,
                    ),
                  ),
                  SizedBox(
                    width: 5,
                  ),

                  ///edit button
                  Padding(
                    padding: const EdgeInsets.all(0.0),
                    child: GestureDetector(
                      onTap: () {
                        Navigator.push(context,
                            MaterialPageRoute(builder: (context) {
                          return ProfileEdit();
                        }));
                      },
                      child: Container(
                        height: 30,
                        width: 30,
                        decoration: BoxDecoration(
                          borderRadius: BorderRadius.circular(4.0),
                          border: Border.all(width: 1.0, color: Colors.black),
                        ),
                        child: // Adobe XD layer: 'surface1' (group)
                            Center(
                          child: Stack(
                            children: <Widget>[
                              Padding(
                                padding: const EdgeInsets.all(5.0),
                                child: Pinned.fromPins(
                                  Pin(start: 0.0, end: 0.0),
                                  Pin(start: 0.0, end: 0.0),
                                  child: SvgPicture.string(
                                    '<svg viewBox="0.1 0.2 17.9 17.9" ><path transform="translate(0.0, 0.0)" d="M 14.03282928466797 0.2460781335830688 C 13.61824989318848 0.2433147430419922 13.21477699279785 0.3897836804389954 12.89973926544189 0.7020667195320129 L 12.20330333709717 1.420594453811646 L 16.79911994934082 6.038514614105225 L 17.49555778503418 5.319990634918213 C 18.12287330627441 4.689893245697021 18.12839317321777 3.670140743255615 17.49555778503418 3.034518480300903 L 15.18799209594727 0.7241752743721008 C 14.86743545532227 0.406364768743515 14.44733810424805 0.2488415241241455 14.03282928466797 0.2460781335830688 Z M 11.42126178741455 2.0534508228302 L 10.33238983154297 3.098077774047852 L 15.12163162231445 7.887362480163574 L 16.23257446289062 6.864822387695312 L 11.42126178741455 2.0534508228302 Z M 9.635951995849609 3.86082649230957 L 2.099717617034912 11.32801818847656 C 1.925608396530151 11.41921138763428 1.801248669624329 11.57669448852539 1.751506090164185 11.76459980010986 L 0.1403442025184631 17.22820663452148 C 0.06849127262830734 17.46860504150391 0.1320533156394958 17.73390769958496 0.3089216947555542 17.91077613830566 C 0.4857900738716125 18.08764457702637 0.7510961294174194 18.15124702453613 0.9915239810943604 18.07936859130859 L 6.455101013183594 16.46823883056641 C 6.709345817565918 16.42953872680664 6.919380664825439 16.25267028808594 6.999523162841797 16.00944137573242 L 14.42526435852051 8.650089263916016 L 13.40268230438232 7.627578258514404 L 5.780786991119385 15.2688570022583 L 2.710465431213379 16.16147804260254 L 2.058259725570679 15.50925636291504 L 2.995110273361206 12.30907154083252 L 10.5479564666748 4.77556848526001 L 9.635951995849609 3.86082649230957 Z M 11.28861045837402 5.538310050964355 L 3.647315740585327 13.20169067382812 L 4.758268356323242 13.44209003448486 L 4.910262107849121 14.46467208862305 L 12.57366561889648 6.820605278015137 L 11.28861045837402 5.538310050964355 Z" fill="#ffffff" stroke="none" stroke-width="1" stroke-miterlimit="4" stroke-linecap="butt" /></svg>',
                                    allowDrawingOutsideViewBox: true,
                                    color: Colors.black,
                                    fit: BoxFit.fill,
                                  ),
                                ),
                              ),
                            ],
                          ),
                        ),
                      ),
                    ),
                  ),
                  Spacer(),
                ],
              ),
              SizedBox(
                height: 10,
              ),
              // ListTile(
              //     visualDensity: VisualDensity(horizontal: -4, vertical: -4),
              //     leading: Container(
              //       height: 30,
              //       width: 30,
              //       child: Center(
              //           child: Stack(
              //         children: <Widget>[
              //           Pinned.fromPins(
              //             Pin(start: 0.0, end: 0.0),
              //             Pin(start: 0.0, end: 0.0),
              //             child: SvgPicture.string(
              //               '<svg viewBox="3.9 3.9 24.1 24.1" ><path transform="translate(0.0, 0.0)" d="M 5.799196720123291 3.949219703674316 C 4.777126312255859 3.949219703674316 3.949219703674316 4.777126312255859 3.949219703674316 5.799196720123291 L 3.949219703674316 22.4562816619873 C 3.949219703674316 23.47830390930176 4.777126312255859 24.30629730224609 5.799196720123291 24.30629730224609 L 15.69018459320068 24.30629730224609 C 16.73415374755859 26.4896068572998 18.95779037475586 28.0098876953125 21.53310012817383 28.0098876953125 C 25.10118293762207 28.0098876953125 28.0098876953125 25.10118293762207 28.0098876953125 21.53310012817383 C 28.0098876953125 18.95779037475586 26.4896068572998 16.73415374755859 24.30629730224609 15.69018459320068 L 24.30629730224609 5.799196720123291 C 24.30629730224609 4.777126312255859 23.47830390930176 3.949219703674316 22.4562816619873 3.949219703674316 L 5.799196720123291 3.949219703674316 Z M 5.799196720123291 5.799196720123291 L 22.4562816619873 5.799196720123291 L 22.4562816619873 9.499140739440918 L 5.799196720123291 9.499140739440918 L 5.799196720123291 5.799196720123291 Z M 10.42598724365234 12.27590751647949 C 10.93512344360352 12.27590751647949 11.35282230377197 12.69351291656494 11.35282230377197 13.20274257659912 C 11.35282230377197 13.71197319030762 10.93512344360352 14.12592124938965 10.42598724365234 14.12592124938965 C 9.916756629943848 14.12592124938965 9.499140739440918 13.71197319030762 9.499140739440918 13.20274257659912 C 9.499140739440918 12.69351291656494 9.916756629943848 12.27590751647949 10.42598724365234 12.27590751647949 Z M 14.12592124938965 12.27590751647949 C 14.63880825042725 12.27590751647949 15.05275821685791 12.69351291656494 15.05275821685791 13.20274257659912 C 15.05275821685791 13.71197319030762 14.63880825042725 14.12592124938965 14.12592124938965 14.12592124938965 C 13.61669158935547 14.12592124938965 13.20274257659912 13.71197319030762 13.20274257659912 13.20274257659912 C 13.20274257659912 12.69351291656494 13.61669158935547 12.27590751647949 14.12592124938965 12.27590751647949 Z M 17.82951164245605 12.27590751647949 C 18.33874130249023 12.27590751647949 18.75634956359863 12.69351291656494 18.75634956359863 13.20274257659912 C 18.75634956359863 13.71197319030762 18.33874130249023 14.12592124938965 17.82951164245605 14.12592124938965 C 17.32028388977051 14.12592124938965 16.90267753601074 13.71197319030762 16.90267753601074 13.20274257659912 C 16.90267753601074 12.69351291656494 17.32028388977051 12.27590751647949 17.82951164245605 12.27590751647949 Z M 21.53310012817383 12.27590751647949 C 22.04233360290527 12.27590751647949 22.4562816619873 12.69351291656494 22.4562816619873 13.20274257659912 C 22.4562816619873 13.71197319030762 22.04233360290527 14.12592124938965 21.53310012817383 14.12592124938965 C 21.02021598815918 14.12592124938965 20.60626792907715 13.71197319030762 20.60626792907715 13.20274257659912 C 20.60626792907715 12.69351291656494 21.02021598815918 12.27590751647949 21.53310012817383 12.27590751647949 Z M 6.722346782684326 15.97949886322021 C 7.235215663909912 15.97949886322021 7.649163722991943 16.39354133605957 7.649163722991943 16.90267753601074 C 7.649163722991943 17.41556358337402 7.235215663909912 17.82951164245605 6.722346782684326 17.82951164245605 C 6.21314525604248 17.82951164245605 5.799196720123291 17.41556358337402 5.799196720123291 16.90267753601074 C 5.799196720123291 16.39354133605957 6.21314525604248 15.97949886322021 6.722346782684326 15.97949886322021 Z M 10.42598724365234 15.97949886322021 C 10.93512344360352 15.97949886322021 11.35282230377197 16.39354133605957 11.35282230377197 16.90267753601074 C 11.35282230377197 17.41556358337402 10.93512344360352 17.82951164245605 10.42598724365234 17.82951164245605 C 9.916756629943848 17.82951164245605 9.499140739440918 17.41556358337402 9.499140739440918 16.90267753601074 C 9.499140739440918 16.39354133605957 9.916756629943848 15.97949886322021 10.42598724365234 15.97949886322021 Z M 14.12592124938965 15.97949886322021 C 14.63880825042725 15.97949886322021 15.05275821685791 16.39354133605957 15.05275821685791 16.90267753601074 C 15.05275821685791 17.41556358337402 14.63880825042725 17.82951164245605 14.12592124938965 17.82951164245605 C 13.61669158935547 17.82951164245605 13.20274257659912 17.41556358337402 13.20274257659912 16.90267753601074 C 13.20274257659912 16.39354133605957 13.61669158935547 15.97949886322021 14.12592124938965 15.97949886322021 Z M 21.53310012817383 16.90267753601074 C 24.09744453430176 16.90267753601074 26.15987205505371 18.96510314941406 26.15987205505371 21.53310012817383 C 26.15987205505371 24.09744453430176 24.09744453430176 26.15987205505371 21.53310012817383 26.15987205505371 C 18.96510314941406 26.15987205505371 16.90267753601074 24.09744453430176 16.90267753601074 21.53310012817383 C 16.90267753601074 18.96510314941406 18.96510314941406 16.90267753601074 21.53310012817383 16.90267753601074 Z M 21.51847267150879 17.81488227844238 C 21.00558471679688 17.82585525512695 20.59895324707031 18.24346160888672 20.60626792907715 18.75634956359863 L 20.60626792907715 21.91413497924805 L 22.25849723815918 23.56627082824707 C 22.48929214477539 23.80803871154785 22.83721923828125 23.9069766998291 23.15963745117188 23.81901168823242 C 23.48196220397949 23.73845481872559 23.73845481872559 23.48196220397949 23.81901168823242 23.15963745117188 C 23.9069766998291 22.83721923828125 23.80803871154785 22.48929214477539 23.56627082824707 22.25849723815918 L 22.4562816619873 21.14850807189941 L 22.4562816619873 18.75634956359863 C 22.45993995666504 18.50726699829102 22.36465644836426 18.26174736022949 22.18516159057617 18.08590888977051 C 22.00932312011719 17.91007041931152 21.76755523681641 17.81122398376465 21.51847267150879 17.81488227844238 Z M 6.722346782684326 19.67952537536621 C 7.235215663909912 19.67952537536621 7.649163722991943 20.09713172912598 7.649163722991943 20.60626792907715 C 7.649163722991943 21.11549949645996 7.235215663909912 21.53310012817383 6.722346782684326 21.53310012817383 C 6.21314525604248 21.53310012817383 5.799196720123291 21.11549949645996 5.799196720123291 20.60626792907715 C 5.799196720123291 20.09713172912598 6.21314525604248 19.67952537536621 6.722346782684326 19.67952537536621 Z M 10.42598724365234 19.67952537536621 C 10.93512344360352 19.67952537536621 11.35282230377197 20.09713172912598 11.35282230377197 20.60626792907715 C 11.35282230377197 21.11549949645996 10.93512344360352 21.53310012817383 10.42598724365234 21.53310012817383 C 9.916756629943848 21.53310012817383 9.499140739440918 21.11549949645996 9.499140739440918 20.60626792907715 C 9.499140739440918 20.09713172912598 9.916756629943848 19.67952537536621 10.42598724365234 19.67952537536621 Z M 14.12592124938965 19.67952537536621 C 14.63880825042725 19.67952537536621 15.05275821685791 20.09713172912598 15.05275821685791 20.60626792907715 C 15.05275821685791 21.11549949645996 14.63880825042725 21.53310012817383 14.12592124938965 21.53310012817383 C 13.61669158935547 21.53310012817383 13.20274257659912 21.11549949645996 13.20274257659912 20.60626792907715 C 13.20274257659912 20.09713172912598 13.61669158935547 19.67952537536621 14.12592124938965 19.67952537536621 Z" fill="#ffffff" stroke="none" stroke-width="1" stroke-miterlimit="4" stroke-linecap="butt" /></svg>',
              //               allowDrawingOutsideViewBox: true,
              //               fit: BoxFit.fill,
              //             ),
              //           ),
              //         ],
              //       )),
              //     ),
              //     title: Text('Appoinment History',
              //         style: TextStyle(color: Colors.white, fontSize: 18)),
              //     onTap: () {
              //       Navigator.push(context,
              //           MaterialPageRoute(builder: (context) {
              //         return AppointmentHistory1(
              //           is_base_category: true,
              //         );
              //       }));
              //     }),
              //  : Container(),
              // is_logged_in.value == true
              //     ?
              ListTile(
                  visualDensity: VisualDensity(horizontal: -4, vertical: -4),
                  leading: Container(
                    height: 30,
                    width: 30,
                    child: Center(
                        child: // Adobe XD layer: 'surface1' (group)
                            Stack(
                      children: <Widget>[
                        Pinned.fromPins(Pin(start: 0.0, end: 0.0),
                            Pin(start: 0.0, end: 0.0),
                            child: Icon(
                              Icons.list_alt,
                            )),
                      ],
                    )),
                  ),
                  title: Text('Prescription',
                      style: TextStyle(color: Colors.black, fontSize: 18)),
                  onTap: () {
                    Navigator.push(context,
                        MaterialPageRoute(builder: (context) {
                      return MedicineData();
                    }));
                  }),

              ListTile(
                  visualDensity: VisualDensity(horizontal: -4, vertical: -4),
                  leading: Container(
                    height: 30,
                    width: 30,
                    child: Center(
                        child: // Adobe XD layer: 'surface1' (group)
                            SvgPicture.string(
                      '<svg viewBox="2.0 4.0 24.1 20.5" ><path  d="M 18.84238243103027 4 C 16.84992790222168 4 15.23330116271973 5.616568088531494 15.23330116271973 7.609081745147705 L 15.23330116271973 20.84238433837891 L 12.82724666595459 20.84238433837891 L 12.82724666595459 7.609081745147705 C 12.82724666595459 5.616568088531494 11.21067810058594 4 9.218164443969727 4 L 2 4 L 2 20.84238433837891 C 2 22.17232894897461 3.076144218444824 23.24843788146973 4.406054973602295 23.24843788146973 L 11.95781898498535 23.24843788146973 C 12.37141990661621 23.96279525756836 13.1420783996582 24.45146560668945 14.03027439117432 24.45146560668945 C 14.91846942901611 24.45146560668945 15.68912792205811 23.96279525756836 16.10272789001465 23.24843788146973 L 23.65449142456055 23.24843788146973 C 24.98443794250488 23.24843788146973 26.060546875 22.17232894897461 26.060546875 20.84238433837891 L 26.060546875 4 L 18.84238243103027 4 Z" fill="#ffffff" stroke="none" stroke-width="1" stroke-miterlimit="4" stroke-linecap="butt" /></svg>',
                      allowDrawingOutsideViewBox: true,
                      color: Colors.grey,
                      fit: BoxFit.fill,
                    )),
                  ),
                  title: Text('Read and Refer',
                      style: TextStyle(color: Colors.black, fontSize: 18)),
                  onTap: () {}),
              //  : Container(),

              SizedBox(
                height: MediaQuery.of(context).size.height * 0.45,
              ),

              // Divider(height: 10),
              // is_logged_in.value == false
              //     ?
              // ListTile(
              //         visualDensity:
              //             VisualDensity(horizontal: -4, vertical: -4),
              //         leading:Container(
              //           height: 35,
              //           width: 35,
              //           decoration: BoxDecoration(
              //               border: Border.all(color: Colors.cyan[800], width: 1.5),
              //               shape: BoxShape.circle
              //           ),
              //           child: Center(
              //             child: Container(
              //                 height: 15,
              //                 width: 15,
              //                 child: Image.asset("assets/login.png",
              //                     fit: BoxFit.scaleDown,
              //                     color: Colors.cyan[800])),
              //           ),
              //         ),
              //         title: Text('Login',
              //             style: TextStyle(color: Colors.white, fontSize: 18)),
              //         onTap: () {
              //           // Navigator.push(context,
              //           //     MaterialPageRoute(builder: (context) {
              //           //   return Login();
              //           // }));
              //         })
              //     : Container(),
              ListTile(
                  visualDensity: VisualDensity(horizontal: -4, vertical: -4),
                  leading: Container(
                    height: 30,
                    width: 30,
                    child: Center(
                        child: // Adobe XD layer: 'surface1' (group)
                            // Adobe XD layer: 'surface1' (group)
                            Stack(
                      children: <Widget>[
                        Pinned.fromPins(
                          Pin(start: 0.0, end: 0.0),
                          Pin(start: 0.0, end: 0.0),
                          child: SvgPicture.string(
                            '<svg viewBox="1.0 0.0 23.6 25.6" ><path  d="M 12.80469989776611 0 C 12.69139957427979 0 12.57810020446777 0.0390625 12.49219989776611 0.109375 C 12.39840030670166 0.1757809966802597 10.29300022125244 2.15625 8.949219703674316 4.144529819488525 C 8.84375 4.296879768371582 8.835940361022949 4.496089935302734 8.925780296325684 4.660160064697266 C 9.011719703674316 4.820310115814209 9.183589935302734 4.925779819488525 9.371089935302734 4.925779819488525 L 11.07810020446777 4.925779819488525 C 11.07810020446777 4.925779819488525 11.36719989776611 14.14840030670166 11.49610042572021 14.33199977874756 C 11.68360042572021 14.59770011901855 12.29300022125244 14.77340030670166 12.80469989776611 14.77340030670166 C 13.30860042572021 14.77340030670166 13.84379959106445 14.59770011901855 14.03520011901855 14.33199977874756 C 14.16020011901855 14.15229988098145 14.52729988098145 4.925779819488525 14.52729988098145 4.925779819488525 L 16.23830032348633 4.925779819488525 C 16.42189979553223 4.925779819488525 16.59379959106445 4.820310115814209 16.67970085144043 4.660160064697266 C 16.76950073242188 4.496089935302734 16.76169967651367 4.296879768371582 16.65629959106445 4.144529819488525 C 15.3125 2.15625 13.20699977874756 0.1757809966802597 13.11330032348633 0.109375 C 13.02340030670166 0.03515629842877388 12.91409969329834 0 12.80469989776611 0 Z M 18.48049926757812 3.4375 C 18.6210994720459 3.75 18.71089935302734 4.078129768371582 18.71089935302734 4.425779819488525 C 18.71089935302734 4.828129768371582 18.61330032348633 5.234379768371582 18.41410064697266 5.59375 C 18.40229988098145 5.625 18.375 5.648439884185791 18.35939979553223 5.679689884185791 C 20.94529914855957 7.453129768371582 22.65229988098145 10.41800022125244 22.65229988098145 13.78909969329834 C 22.65229988098145 19.21879959106445 18.23439979553223 23.63669967651367 12.80469989776611 23.63669967651367 C 7.371089935302734 23.63669967651367 2.953130006790161 19.21879959106445 2.953130006790161 13.78909969329834 C 2.953130006790161 10.41800022125244 4.664060115814209 7.453129768371582 7.246089935302734 5.679689884185791 C 7.234379768371582 5.648439884185791 7.207029819488525 5.625 7.1875 5.59375 C 6.992189884185791 5.234379768371582 6.894529819488525 4.828129768371582 6.894529819488525 4.425779819488525 C 6.894529819488525 4.078129768371582 6.988279819488525 3.753910064697266 7.125 3.441410064697266 C 3.46875 5.457029819488525 0.9921879768371582 9.328129768371582 0.9921879768371582 13.78909969329834 C 0.9921879768371582 20.30470085144043 6.285160064697266 25.60549926757812 12.80469989776611 25.60549926757812 C 19.32029914855957 25.60549926757812 24.6210994720459 20.30470085144043 24.6210994720459 13.78909969329834 C 24.6210994720459 9.328129768371582 22.13669967651367 5.453129768371582 18.48049926757812 3.4375 Z" fill="#ffffff" stroke="none" stroke-width="1" stroke-miterlimit="4" stroke-linecap="butt" /></svg>',
                            allowDrawingOutsideViewBox: true,
                            color: Colors.grey,
                            fit: BoxFit.fill,
                          ),
                        ),
                      ],
                    )),
                  ),
                  title: Text('Logout',
                      style: TextStyle(color: Colors.black, fontSize: 18)),
                  onTap: () {
                    onTapLogout(context);
                  })
            ],
          ),
        ),
      ),
    );
  }
}
